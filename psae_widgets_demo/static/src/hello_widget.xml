<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="psae_widgets_demo.HelloWidget">
        <div class="o_form_view o_ftco_hello shadow p-3">
            <h2>FTCO Hello Widget</h2>
            <p>
                This is a minimal OWL component registered as a client action.
                It shows lifecycle hooks, local state, DOM interaction, and ORM service usage.
            </p>
            
            <!-- User Dropdown Section
                 Why this structure:
                 - Bootstrap form-label/form-select for consistent styling
                 - t-foreach renders each user as an option dynamically
                 - t-key="user.id" optimizes rendering performance
                 - t-att-selected ensures correct option is visually selected
                 - Select2 integration provides enhanced UX with search and styling
            -->
            <div class="mb-3">
                <label for="userSelect" class="form-label">Select User:</label>
                <select t-ref="userSelect" id="uselect" class="form-select select2">
                    <t t-foreach="state.users" t-as="user" t-key="user.id">
                        <option t-att-value="user.id" t-att-selected="state.selectedUser and state.selectedUser.id === user.id ? 'selected' : false">
                            <t t-esc="user.name"/>
                        </option>
                    </t>
                </select>
            </div>
            
            <!-- Hello Message Section
                 Why this approach:
                 - t-if prevents rendering when no user is selected
                 - Bootstrap alert-info provides visual emphasis
                 - t-esc safely renders user name (prevents XSS attacks)
                 - Responsive design with Bootstrap margin classes
            -->
            <div class="alert alert-info mb-3" t-if="state.selectedUser">
                <h4>Hello <t t-esc="state.selectedUser.name"/>!</h4>
            </div>
            
            <div class="d-flex align-items-center gap-2 my-2">
                <button class="btn btn-secondary" t-on-click="decrement">-</button>
                <span class="badge text-dark" t-esc="state.counter"/>
                <button class="btn btn-primary" t-on-click="increment">+</button>
            </div>
            <div class="text-muted">Ticks since mount: <t t-esc="state.ticks"/></div>
        </div>
    </t>
</templates>
